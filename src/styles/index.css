@import "tailwindcss";

@layer components {

:root {
    --bg-neutral: #f0f0f0;
    --accent-dark: #000000;
    --primary-vibrant: #ff00ff; /* Neon Pink */
    --border-color: #000000;
    --paper-bg: #FFFFFF;
}
body {
    background-color: var(--bg-neutral);
    /* Add noise texture */
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
    font-family: 'Courier Prime', monospace;
    color: var(--accent-dark);
}

/* Typography utilities */
.font-marker { font-family: 'Permanent Marker', cursive; }
.font-typewriter { font-family: 'Courier Prime', monospace; }

.upload-box {
    border: 3px dashed var(--border-color);
    background-color: white;
    transition: all 0.1s ease;
    box-shadow: 4px 4px 0px 0px rgba(0,0,0,1);
}
.upload-box:active, .upload-box.dragover {
    transform: translate(2px, 2px);
    box-shadow: 2px 2px 0px 0px rgba(0,0,0,1);
    background-color: #ffff00; /* Highlighter yellow active */
}

/* Harsh aesthetic for inputs/selects */
select, input {
    border: 2px solid black !important;
    border-radius: 0 !important;
    box-shadow: 2px 2px 0px 0px rgba(0,0,0,1);
}
select:focus, input:focus {
    outline: none;
    box-shadow: 4px 4px 0px 0px var(--primary-vibrant);
    transform: translate(-1px, -1px);
}

/* Preview specific styles */
.print-sheet {
    background-color: var(--paper-bg);
    /* Aspect ratio set by JS */
    box-shadow: 4px 4px 0px 0px rgba(0,0,0,1);
    border: 2px solid black;
    position: relative;
    flex-shrink: 0;
    transition: all 0.2s ease;
}

@media print {
    .print-sheet {
        border: none;
        box-shadow: none;
        margin: 0;
        page-break-after: always;
        max-width: none !important;
        max-height: none !important;
        width: 100% !important;
        height: 100% !important;
    }
    .flip-btn, .page-label, .guidelines {
        display: none !important;
    }
    .page-cell {
        border: none !important; /* Optional: remove grid lines in print if desired, but user might want cut lines? Keeping simple for now */
    }
}

/* Export clean-up (for html2canvas) */
.is-exporting .flip-btn, 
.is-exporting .page-label, 
.is-exporting .page-placeholder,
.is-exporting .guidelines {
    display: none !important;
}
.is-exporting .page-cell {
    border: none !important;
}

.zine-grid {
    display: grid;
    height: 100%;
    width: 100%;
}
.page-cell {
    border: 1px solid black; /* Hard grid lines */
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    cursor: grab;
    background: white;
}
.page-cell.dragging {
    opacity: 0.8;
    cursor: grabbing;
    filter: invert(1); /* Punk style invert */
    z-index: 50;
}
.page-cell.drag-over {
    background-color: var(--primary-vibrant);
    z-index: 40;
}
.page-content-img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    /* Multiply effect to look like ink on paper */
    mix-blend-mode: multiply; 
}
.page-label {
    position: absolute;
    background: black;
    color: white;
    font-family: 'Courier Prime', monospace;
    font-weight: bold;
    font-size: 10px;
    padding: 2px 4px;
    z-index: 20;
    top: 0;
    left: 0;
    border-bottom: 1px solid black;
    border-right: 1px solid black;
}

/* Rotations for default layout */
.page-cell[data-page="2"], .page-cell[data-page="3"], 
.page-cell[data-page="4"], .page-cell[data-page="5"] {
    transform: rotate(180deg);
}

/* Accordion-16 specific upside-down pages */
.zine-grid.accordion-16 .page-cell[data-page="1"],
.zine-grid.accordion-16 .page-cell[data-page="2"],
.zine-grid.accordion-16 .page-cell[data-page="3"],
.zine-grid.accordion-16 .page-cell[data-page="4"],
.zine-grid.accordion-16 .page-cell[data-page="9"],
.zine-grid.accordion-16 .page-cell[data-page="10"],
.zine-grid.accordion-16 .page-cell[data-page="11"],
.zine-grid.accordion-16 .page-cell[data-page="12"] {
    transform: rotate(180deg);
}
/* Override default rotations for accordion template */
.zine-grid.accordion-16 .page-cell[data-page="5"],
.zine-grid.accordion-16 .page-cell[data-page="6"],
.zine-grid.accordion-16 .page-cell[data-page="7"],
.zine-grid.accordion-16 .page-cell[data-page="8"],
.zine-grid.accordion-16 .page-cell[data-page="13"],
.zine-grid.accordion-16 .page-cell[data-page="14"],
.zine-grid.accordion-16 .page-cell[data-page="15"],
.zine-grid.accordion-16 .page-cell[data-page="16"] {
    transform: rotate(0deg);
}

/* Buttons matching the punk vibe */
.action-button {
    border: 3px solid black !important;
    border-radius: 0 !important;
    box-shadow: 4px 4px 0px 0px black;
    transition: all 0.1s cubic-bezier(0.4, 0, 0.2, 1);
    text-transform: uppercase;
    font-weight: 900;
}
.action-button:hover {
    transform: translate(-2px, -2px);
    box-shadow: 6px 6px 0px 0px var(--primary-vibrant);
}
.action-button:active {
    transform: translate(2px, 2px);
    box-shadow: 2px 2px 0px 0px black;
}
  /* Centered Page Label (Sticker Style) */
.page-label.centered {
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(-5deg);
    font-size: 24px;
    padding: 8px 12px;
    border: 3px solid black;
    box-shadow: 4px 4px 0px 0px rgba(0,0,0,1);
    z-index: 100;
    background-color: white;
    color: black;
}

/* View transitions */
.view-section {
    transition: opacity 0.3s ease, transform 0.3s ease;
}
.view-section.hidden {
    display: none;
    opacity: 0;
    transform: translateY(10px);
}

/* Progress Bar */
.progress-bar-container {
    width: 100%;
    height: 12px;
    background: white;
    border: 2px solid black;
    overflow: hidden;
}
#progress-fill {
    height: 100%;
    background: var(--primary-vibrant);
    width: 0%;
    /* Striped pattern for progress */
    background-image: linear-gradient(
        45deg, 
        rgba(0,0,0,0.15) 25%, 
        transparent 25%, 
        transparent 50%, 
        rgba(0,0,0,0.15) 50%, 
        rgba(0,0,0,0.15) 75%, 
        transparent 75%, 
        transparent
    );
    background-size: 20px 20px;
}

/* Layout toggle style override (if used later) */
.settings-panel {
    border: 3px solid black;
    box-shadow: 4px 4px 0px 0px black;
    border-radius: 0;
}

/* Punk Toast Notifications */
.toast-container {
    pointer-events: none;
}
.toast {
    background: white;
    border: 3px solid black;
    box-shadow: 4px 4px 0px 0px black;
    padding: 1rem;
    width: 320px;
    pointer-events: auto;
    display: flex;
    align-items: flex-start;
    gap: 12px;
    transform: translateX(120%);
    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    opacity: 0;
}
.toast svg { width: 20px; height: 20px; }
.toast-visible {
    transform: translateX(0);
    opacity: 1;
}

/* Toast Variants */
.toast-success { border-color: black; }
.toast-success .toast-icon { color: #00cc00; }  /* Green accent Icon */
.toast-success::after {
    content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 6px; background: #00cc00;
}

.toast-error { border-color: black; }
.toast-error .toast-icon { color: #ff0000; }
.toast-error::after {
    content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 6px; background: #ff0000;
}

.toast-info { border-color: black; }
.toast-info .toast-icon { color: blue; }
.toast-info::after {
    content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 6px; background: cyan;
}

.toast-content { flex: 1; padding-left: 8px; }
.toast-title { font-weight: 900; text-transform: uppercase; font-size: 0.9rem; margin-bottom: 2px; font-family: 'Permanent Marker', cursive; }
.toast-message { font-size: 0.8rem; font-family: 'Courier Prime', monospace; font-weight: bold; }

.toast-close {
    background: transparent; border: none; font-size: 1.5rem; line-height: 1; cursor: pointer; padding: 0 4px;
    color: black; opacity: 0.5;
}
.toast-close:hover { opacity: 1; color: red; }

}
